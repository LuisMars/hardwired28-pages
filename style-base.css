/* Hardwired 28 - Shared Base Styles */

/* Fonts */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=PT+Serif:wght@400;700&family=Ubuntu+Mono&display=swap');

/* CSS Variables */
:root {
    /* Fonts */
    --font-body: 'PT Serif', serif;
    --font-heading: 'Montserrat', sans-serif;
    --font-mono: 'Ubuntu Mono', 'Liberation Mono', 'Courier New', monospace;

    --color-table-header-bg: #000;
    --color-table-header-text: #fff;

    /* Page Margins */
    --page-margin-vertical: 10mm;
    --page-margin-horizontal: 8mm;
    --page-margin-spine: 12mm;

    /* Font Sizes (defaults, override in print stylesheets) */
    --font-size-body: 9.25pt;
    --font-size-small: 9pt;
    --font-size-tiny: 7.75pt;
    --font-size-micro: 7pt;
    --font-size-h1: 13pt;
    --font-size-h2: 11pt;
    --font-size-h3: 10.5pt;
    --font-size-h4: 10pt;
    --font-size-cover-h1: 38pt;
    --font-size-cover-h2: 24pt;

    /* Zorn Palette */
    --color-black: #1a1a1a;
    --color-white: #f5f5f0;
    --color-ochre: #c9a227;
    --color-ochre-dark: #8b6914;
    --color-red: #8b2500;
    --color-red-light: #c73e1d;

    /* Functional Colors */
    --color-bg-dark: #1a1a1a;
    --color-bg-light: #f5f5f0;
    --color-text: #1a1a1a;
    --color-text-muted: #666;
    --color-text-inverse: #f5f5f0;
    --color-border: #333;
    --color-bg-muted: #f5f5f5;

    /* Corporate Colors */
    --color-corporate: #333;
    --color-corporate-dark: #222;
    --color-row-alt: #f8f9fa;
    --color-row-hover: #e8f4f8;
    --color-row-border: #e0e0e0;

    /* App Menu */
    --app-menu-height: 2.5rem;
}

/* Base Typography */
body {
    font-family: var(--font-body);
    font-weight: 400;
    color: var(--color-text);
}

/* App navigation */
body.has-app-menu {
    padding-top: var(--app-menu-height);
}

.app-menu {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 2000;
    background: rgba(245, 245, 240, 0.92);
    border-bottom: 1px solid var(--color-border);
    backdrop-filter: blur(8px);
    max-width: 100vw;
    overflow: visible;
}

.app-menu__inner {
    max-width: 1100px;
    margin: 0 auto;
    min-height: var(--app-menu-height);
    padding: 0 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: nowrap;
}

.app-menu__brand {
    font-family: var(--font-heading);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--color-text);
    text-decoration: none;
    line-height: 1;
}

.app-menu__brand:hover {
    text-decoration: underline;
}

.app-menu__toggle {
    display: none;
    border: 1px solid var(--color-border);
    background: #fff;
    color: var(--color-text);
    border-radius: 8px;
    padding: 0.35rem 0.6rem;
    font-family: var(--font-heading);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    cursor: pointer;
}

.app-menu__links {
    display: flex;
    align-items: center;
    flex-wrap: nowrap;
    gap: 0.25rem;
    flex: 1 1 auto;
    min-width: 0;
    overflow: visible;
}

.app-menu__links a {
    display: inline-flex;
    align-items: center;
    gap: 0.15rem;
    padding: 0.2rem 0.35rem;
    border-radius: 6px;
    color: var(--color-text);
    text-decoration: none;
    font-family: var(--font-heading);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-size: 10pt;
    line-height: 1.1;
    white-space: nowrap;
}

.app-menu__links a:hover {
    background: var(--color-row-hover);
}

/* Dropdown submenu */
.app-menu__dropdown {
    position: relative;
}

.app-menu__dropdown-toggle {
    display: inline-flex;
    align-items: center;
    gap: 0.15rem;
    padding: 0.2rem 0.35rem;
    border-radius: 6px;
    color: var(--color-text);
    text-decoration: none;
    font-family: var(--font-heading);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    font-size: 10pt;
    line-height: 1.1;
    white-space: nowrap;
    cursor: pointer;
    background: none;
    border: none;
}

.app-menu__dropdown-toggle:hover {
    background: var(--color-row-hover);
}

.app-menu__dropdown-toggle::after {
    content: '';
    border: 4px solid transparent;
    border-top-color: currentColor;
    margin-left: 2px;
    margin-top: 2px;
}

.app-menu__submenu {
    display: none;
    position: absolute;
    top: calc(100% - 2px);
    left: -0.25rem;
    background: #fff;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    padding: 0.35rem 0;
    min-width: 140px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 9999;
}

/* Invisible bridge to prevent hover gap */
.app-menu__dropdown::before {
    content: '';
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    height: 8px;
    display: none;
}

.app-menu__dropdown:hover::before {
    display: block;
}

.app-menu__dropdown:hover .app-menu__submenu,
.app-menu__dropdown:focus-within .app-menu__submenu {
    display: block;
}

.app-menu__submenu a {
    display: block;
    padding: 0.35rem 0.75rem;
    border-radius: 0;
}

.app-menu__submenu a:hover {
    background: var(--color-row-hover);
}

/* Dark theme dropdown */
.app-menu[data-theme="dark"] .app-menu__dropdown-toggle {
    color: #fff;
}

.app-menu[data-theme="dark"] .app-menu__dropdown-toggle:hover {
    background: rgba(255,255,255,0.1);
}

.app-menu[data-theme="dark"] .app-menu__dropdown-toggle::after {
    border-top-color: #fff;
}

.app-menu[data-theme="dark"] .app-menu__submenu {
    background: #1a1a2e;
    border-color: #444;
}

.app-menu[data-theme="dark"] .app-menu__submenu a {
    color: #fff;
}

.app-menu[data-theme="dark"] .app-menu__submenu a:hover {
    background: rgba(255,255,255,0.1);
}

.app-menu__actions {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 0 0 auto;
}

.app-menu__action {
    border: 1px solid var(--color-border);
    background: #fff;
    color: var(--color-text);
    border-radius: 8px;
    padding: 0.35rem 0.6rem;
    font-family: var(--font-heading);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    cursor: pointer;
    font-size: 10pt;
}

.app-menu__action:hover {
    background: var(--color-row-hover);
}

.app-menu[data-theme="dark"] {
    background: rgba(26, 26, 26, 0.92);
    border-bottom-color: #333;
}

.app-menu[data-theme="dark"] .app-menu__brand {
    color: var(--color-text-inverse);
}

.app-menu[data-theme="dark"] .app-menu__toggle,
.app-menu[data-theme="dark"] .app-menu__action {
    background: #222;
    border-color: #333;
    color: var(--color-text-inverse);
}

.app-menu[data-theme="dark"] .app-menu__links a {
    color: var(--color-text-inverse);
}

.app-menu[data-theme="dark"] .app-menu__links a:hover {
    background: rgba(255, 255, 255, 0.08);
}

/* Corporate theme nav - matches both nav attribute and root attribute */
.app-menu[data-theme="corporate"],
:root[data-theme="corporate"] .app-menu {
    background: rgba(37, 99, 235, 0.95);
    border-bottom-color: #1D4ED8;
}

.app-menu[data-theme="corporate"] .app-menu__brand,
:root[data-theme="corporate"] .app-menu .app-menu__brand {
    color: #FFFFFF;
}

.app-menu[data-theme="corporate"] .app-menu__toggle,
.app-menu[data-theme="corporate"] .app-menu__action,
:root[data-theme="corporate"] .app-menu .app-menu__toggle,
:root[data-theme="corporate"] .app-menu .app-menu__action {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
    color: #FFFFFF;
}

.app-menu[data-theme="corporate"] .app-menu__toggle:hover,
.app-menu[data-theme="corporate"] .app-menu__action:hover,
:root[data-theme="corporate"] .app-menu .app-menu__toggle:hover,
:root[data-theme="corporate"] .app-menu .app-menu__action:hover {
    background: rgba(255, 255, 255, 0.25);
}

.app-menu[data-theme="corporate"] .app-menu__links a,
:root[data-theme="corporate"] .app-menu .app-menu__links a {
    color: #FFFFFF;
}

.app-menu[data-theme="corporate"] .app-menu__links a:hover,
:root[data-theme="corporate"] .app-menu .app-menu__links a:hover {
    background: rgba(255, 255, 255, 0.15);
}

.app-menu[data-theme="corporate"] .app-menu__dropdown-toggle,
:root[data-theme="corporate"] .app-menu .app-menu__dropdown-toggle {
    color: #FFFFFF;
}

.app-menu[data-theme="corporate"] .app-menu__dropdown-toggle:hover,
:root[data-theme="corporate"] .app-menu .app-menu__dropdown-toggle:hover {
    background: rgba(255, 255, 255, 0.15);
}

.app-menu[data-theme="corporate"] .app-menu__dropdown-toggle::after,
:root[data-theme="corporate"] .app-menu .app-menu__dropdown-toggle::after {
    border-top-color: #FFFFFF;
}

.app-menu[data-theme="corporate"] .app-menu__submenu,
:root[data-theme="corporate"] .app-menu .app-menu__submenu {
    background: #2563EB;
    border-color: #1D4ED8;
}

.app-menu[data-theme="corporate"] .app-menu__submenu a,
:root[data-theme="corporate"] .app-menu .app-menu__submenu a {
    color: #FFFFFF;
}

.app-menu[data-theme="corporate"] .app-menu__submenu a:hover,
:root[data-theme="corporate"] .app-menu .app-menu__submenu a:hover {
    background: rgba(255, 255, 255, 0.15);
}

/* Fulfillment theme nav - Amazon dark navy */
.app-menu[data-theme="fulfillment"],
:root[data-theme="fulfillment"] .app-menu {
    background: #131A22;
    border-bottom-color: #232F3E;
}

.app-menu[data-theme="fulfillment"] .app-menu__brand,
:root[data-theme="fulfillment"] .app-menu .app-menu__brand {
    color: #FFFFFF;
}

.app-menu[data-theme="fulfillment"] .app-menu__toggle,
.app-menu[data-theme="fulfillment"] .app-menu__action,
:root[data-theme="fulfillment"] .app-menu .app-menu__toggle,
:root[data-theme="fulfillment"] .app-menu .app-menu__action {
    background: #232F3E;
    border-color: #37475A;
    color: #FFFFFF;
}

.app-menu[data-theme="fulfillment"] .app-menu__toggle:hover,
.app-menu[data-theme="fulfillment"] .app-menu__action:hover,
:root[data-theme="fulfillment"] .app-menu .app-menu__toggle:hover,
:root[data-theme="fulfillment"] .app-menu .app-menu__action:hover {
    background: #37475A;
    border-color: #FF9900;
}

.app-menu[data-theme="fulfillment"] .app-menu__links a,
:root[data-theme="fulfillment"] .app-menu .app-menu__links a {
    color: #FFFFFF;
}

.app-menu[data-theme="fulfillment"] .app-menu__links a:hover,
:root[data-theme="fulfillment"] .app-menu .app-menu__links a:hover {
    background: #232F3E;
    color: #FF9900;
}

.app-menu[data-theme="fulfillment"] .app-menu__dropdown-toggle,
:root[data-theme="fulfillment"] .app-menu .app-menu__dropdown-toggle {
    color: #FFFFFF;
}

.app-menu[data-theme="fulfillment"] .app-menu__dropdown-toggle:hover,
:root[data-theme="fulfillment"] .app-menu .app-menu__dropdown-toggle:hover {
    background: #232F3E;
    color: #FF9900;
}

.app-menu[data-theme="fulfillment"] .app-menu__dropdown-toggle::after,
:root[data-theme="fulfillment"] .app-menu .app-menu__dropdown-toggle::after {
    border-top-color: #FFFFFF;
}

.app-menu[data-theme="fulfillment"] .app-menu__submenu,
:root[data-theme="fulfillment"] .app-menu .app-menu__submenu {
    background: #232F3E;
    border-color: #37475A;
}

.app-menu[data-theme="fulfillment"] .app-menu__submenu a,
:root[data-theme="fulfillment"] .app-menu .app-menu__submenu a {
    color: #FFFFFF;
}

.app-menu[data-theme="fulfillment"] .app-menu__submenu a:hover,
:root[data-theme="fulfillment"] .app-menu .app-menu__submenu a:hover {
    background: #37475A;
    color: #FF9900;
}

/* Hallucination theme nav - ChatGPT pure monochrome */
.app-menu[data-theme="hallucination"],
:root[data-theme="hallucination"] .app-menu {
    background: #171717;
    border-bottom-color: #242424;
}

.app-menu[data-theme="hallucination"] .app-menu__brand,
:root[data-theme="hallucination"] .app-menu .app-menu__brand {
    color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__toggle,
.app-menu[data-theme="hallucination"] .app-menu__action,
:root[data-theme="hallucination"] .app-menu .app-menu__toggle,
:root[data-theme="hallucination"] .app-menu .app-menu__action {
    background: #2A2A2A;
    border-color: #2A2A2A;
    color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__toggle:hover,
.app-menu[data-theme="hallucination"] .app-menu__action:hover,
:root[data-theme="hallucination"] .app-menu .app-menu__toggle:hover,
:root[data-theme="hallucination"] .app-menu .app-menu__action:hover {
    background: #333333;
    border-color: #333333;
}

.app-menu[data-theme="hallucination"] .app-menu__links a,
:root[data-theme="hallucination"] .app-menu .app-menu__links a {
    color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__links a:hover,
:root[data-theme="hallucination"] .app-menu .app-menu__links a:hover {
    background: #2A2A2A;
    color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__dropdown-toggle,
:root[data-theme="hallucination"] .app-menu .app-menu__dropdown-toggle {
    color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__dropdown-toggle:hover,
:root[data-theme="hallucination"] .app-menu .app-menu__dropdown-toggle:hover {
    background: #2A2A2A;
    color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__dropdown-toggle::after,
:root[data-theme="hallucination"] .app-menu .app-menu__dropdown-toggle::after {
    border-top-color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__submenu,
:root[data-theme="hallucination"] .app-menu .app-menu__submenu {
    background: #212121;
    border-color: #2A2A2A;
}

.app-menu[data-theme="hallucination"] .app-menu__submenu a,
:root[data-theme="hallucination"] .app-menu .app-menu__submenu a {
    color: #FFFFFF;
}

.app-menu[data-theme="hallucination"] .app-menu__submenu a:hover,
:root[data-theme="hallucination"] .app-menu .app-menu__submenu a:hover {
    background: #2A2A2A;
    color: #FFFFFF;
}

@media (max-width: 980px) {
    /* Mobile body padding */
    body {
        padding: 0 !important;
    }

    body.has-app-menu {
        padding-top: var(--app-menu-height) !important;
    }

    /* Disable booklet mode on mobile */
    body.booklet-mode .content {
        display: block !important;
        grid-template-columns: none !important;
    }

    .app-menu__toggle {
        display: inline-flex;
    }

    .app-menu__inner {
        flex-wrap: wrap;
    }

    .app-menu__links {
        display: none;
        width: 100%;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        margin-top: 0.25rem;
        border-top: 1px solid var(--color-row-border);
        flex-direction: column;
        align-items: flex-start;
        overflow: visible;
    }

    .app-menu[data-open="true"] .app-menu__links {
        display: flex;
    }

    .app-menu__actions {
        margin-left: 0;
    }
}

@media print {
    body.has-app-menu {
        padding-top: 0 !important;
    }
    .app-menu {
        display: none !important;
    }
}

h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    text-transform: uppercase;
    margin: 0;
    letter-spacing: -0.03em;
}

h1 { font-weight: 800; }
h2 { font-weight: 700; }
h3 { font-weight: 700; }
h4 { font-weight: 700; }

/* Headings followed by tables - remove border and reduce spacing */
h1:has(+ table),
h2:has(+ table),
h3:has(+ table),
h4:has(+ table) {
    border-bottom: none;
    padding-bottom: 0;
    margin-bottom: 0.3em;
}

strong, b {
    font-weight: 700;
}

em, i {
    font-style: italic;
}

/* Tables - Corporate Style */
table {
    width: 100%;
    border-collapse: collapse;
    font-family: var(--font-body);
    font-size: 0.95em;
    border: none;
}

thead {
    background: var(--color-corporate);
    color: #fff;
}

th {
    text-align: left;
    font-family: var(--font-body);
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.85em;
    letter-spacing: 0.08em;
    padding: 0.6em 1em;
    border: none;
}

th:first-child {
    text-align: center;
}

td {
    padding: 0.6em 1em;
    border: none;
    border-bottom: 1px solid var(--color-row-border);
}

td:first-child {
    text-align: center;
    font-weight: 500;
}

/* Zebra striping */
tbody tr:nth-child(even) {
    background: var(--color-row-alt);
}

tbody tr:nth-child(odd) {
    background: #fff;
}

/* Last row - no border */
tbody tr:last-child td {
    border-bottom: 2px solid var(--color-corporate);
}

/* Lists - Corporate Style */
ol, ul {
    padding-inline-start: 2.5mm;
    margin: 0.5em 0;
}

ul {
    list-style-type: "â–¸ ";
}

li {
    margin: 0.25em 0;
    line-height: 1.4;
}

li::marker {
    color: var(--color-corporate);
}

/* Nested lists */
li > ul, li > ol {
    margin: 0.25em 0;
}

/* Horizontal Rule */
hr {
    border: none;
    border-top: 2px solid var(--color-border);
}

/* Code */
code {
    font-family: var(--font-mono);
    font-weight: bold;
}

pre {
    font-family: var(--font-mono);
    overflow-x: auto;
}

/* Blockquote - Corporate Style */
blockquote {
    margin: 1em 0;
    padding: 0.75em 1.25em;
    border-left: 4px solid var(--color-corporate);
    background: var(--color-row-alt);
    color: var(--color-text);
    font-style: italic;
}

blockquote p {
    margin: 0;
}

blockquote p + p {
    margin-top: 0.5em;
}

/* Print Styles for Warband Builder */
@media print {
    /* Force exact colors for B&W cards */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    body {
        background: white !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    /* Hide all interactive elements */
    .print\\:hidden,
    .mode-selector,
    .nav-link,
    button,
    input,
    select,
    label {
        display: none !important;
    }

    /* Model cards (warband sheet view) */
    .model-card {
        border: 2px solid black !important;
        background: white !important;
        page-break-inside: avoid;
        break-inside: avoid;
    }

    /* Card containers - printer-friendly B&W */
    .item-card,
    .archetype-card {
        /* Size is set inline via style prop in mm */
        border: 2px solid black !important;
        background: white !important;
        page-break-inside: avoid;
        break-inside: avoid;
        margin: 0 !important;
        box-shadow: none !important;
        border-radius: 1.5mm !important;
    }

    /* Card header backgrounds - black */
    .card-header {
        background: black !important;
        color: white !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    /* Gray backgrounds for archetype headers */
    .bg-gray-200 {
        background: #e5e5e5 !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    .bg-gray-100 {
        background: #f0f0f0 !important;
    }

    /* Black backgrounds */
    .bg-black {
        background: black !important;
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }

    .text-white {
        color: white !important;
    }

    /* Hide scrollbars */
    ::-webkit-scrollbar {
        display: none;
    }

    /* Page setup - minimal margins for card printing */
    @page {
        margin: 5mm;
        size: auto;
    }

    /* Card print container - tight gap for easy cutting */
    .flex-wrap {
        gap: 2mm !important;
    }
}

/* Screen-only styles for print preview */
@media screen {
    .item-card,
    .archetype-card {
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }
}
